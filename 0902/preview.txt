今日の問題は難しいかったです。30分行なって、コンパクトなコードを書けなかったので、人のコードを一部参考にしました。(マルパクリは、心が痛むのでしません)
理由
pythonなので、コードをコンパクトに書かないとメモリを食うからです。

実行時間　1197 ms　メモリ　28760 KB

if文の条件(規則性があるもの)は、for文(for x,y in ([],[],[]))で代用できたり、キューと、スタックの有用性に気がついて、良い経験になりました。
今度(次回ではないかも知れない)は、
